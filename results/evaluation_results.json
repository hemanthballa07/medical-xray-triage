{
  "thresholds": {
    "default": {
      "threshold": 0.5,
      "metrics": {
        "auroc": 0.9943496899539848,
        "precision": 0.9887278582930756,
        "recall": 0.9578783151326054,
        "f1": 0.9730586370839936,
        "threshold": 0.5,
        "sensitivity": 0.9578783151326054,
        "specificity": 0.9705882352941176,
        "confusion_matrix": {
          "tn": 231,
          "fp": 7,
          "fn": 27,
          "tp": 614
        }
      },
      "explanation": "Standard 0.5 threshold for binary classification"
    },
    "optimal_f1": {
      "threshold": 1.7149853759335087e-10,
      "metrics": {
        "auroc": 0.9943496899539848,
        "precision": 0.9754601226993865,
        "recall": 0.9921996879875195,
        "f1": 0.9837587006960556,
        "threshold": 1.7149853759335087e-10,
        "sensitivity": 0.9921996879875195,
        "specificity": 0.9327731092436975,
        "confusion_matrix": {
          "tn": 222,
          "fp": 16,
          "fn": 5,
          "tp": 636
        }
      },
      "explanation": "Threshold that maximizes F1 score"
    },
    "operating": {
      "threshold": 1.7149853759335087e-10,
      "metrics": {
        "auroc": 0.9943496899539848,
        "precision": 0.9754601226993865,
        "recall": 0.9921996879875195,
        "f1": 0.9837587006960556,
        "threshold": 1.7149853759335087e-10,
        "sensitivity": 0.9921996879875195,
        "specificity": 0.9327731092436975,
        "confusion_matrix": {
          "tn": 222,
          "fp": 16,
          "fn": 5,
          "tp": 636
        }
      },
      "explanation": "Operating threshold chosen to prioritize recall while maintaining specificity >= 0.93 for clinical safety"
    }
  },
  "calibration": {
    "temperature": 3.5099199466944526,
    "ece_uncalibrated": 0.03706781818733823,
    "ece_calibrated": 0.037296618804318636,
    "calibrated_metrics": {
      "auroc": 0.9959818560809659,
      "precision": 0.9887278582930756,
      "recall": 0.9578783151326054,
      "f1": 0.9730586370839936,
      "threshold": 0.5,
      "sensitivity": 0.9578783151326054,
      "specificity": 0.9705882352941176,
      "confusion_matrix": {
        "tn": 231,
        "fp": 7,
        "fn": 27,
        "tp": 614
      }
    }
  },
  "error_analysis": {
    "false_negatives": {
      "count": 27,
      "mean_confidence": 0.024652766063809395,
      "std_confidence": 0.08592324703931808,
      "min_confidence": 3.2064369703041176e-24,
      "max_confidence": 0.43161603808403015
    },
    "false_positives": {
      "count": 7,
      "mean_confidence": 0.9615395665168762,
      "std_confidence": 0.08928948640823364,
      "min_confidence": 0.7428801655769348,
      "max_confidence": 1.0
    },
    "summary": [
      "False Negatives: 27 cases with mean confidence 0.025",
      "False Positives: 7 cases with mean confidence 0.962",
      "Class imbalance observed: More false negatives than false positives",
      "False negatives tend to have low confidence scores, suggesting difficult cases",
      "False positives tend to have high confidence, suggesting model overconfidence"
    ]
  },
  "robustness": {
    "stronger_crop": {
      "auroc": 0.9675598788657428,
      "f1": 0.9475240206947524,
      "recall": 1.0
    },
    "stronger_rotation": {
      "auroc": 0.9574293055755843,
      "f1": 0.9121951219512195,
      "recall": 0.875195007800312
    },
    "stronger_color_jitter": {
      "auroc": 0.9675992081700073,
      "f1": 0.9530516431924883,
      "recall": 0.9500780031201248
    }
  },
  "config": {
    "config": null,
    "data_dir": "data/chest_xray",
    "images_dir": "data/chest_xray/train",
    "labels_path": "data/chest_xray/train_labels.csv",
    "output_dir": "./results",
    "img_size": 320,
    "model_name": "resnet18",
    "pretrained": true,
    "batch_size": 8,
    "epochs": 25,
    "lr": 0.0001,
    "weight_decay": 0.0001,
    "patience": 8,
    "model_path": "./results/best.pt",
    "threshold": 0.5,
    "seed": 1337,
    "num_workers": 0,
    "device": "mps",
    "save_freq": 1,
    "log_freq": 10,
    "verbose": false,
    "cam_layer": "features",
    "image": null,
    "cam_method": "GradCAM",
    "best_model_path": "./results/best.pt",
    "metrics_path": "./results/metrics.json"
  }
}